"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[460],{6460:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(4165),c=n(5861),a=n(885),r=n(2791),i=n(4569),l=n.n(i),o=n(1087),u=n(184);function d(e){return(0,u.jsx)("div",{className:"product col-md-3",children:(0,u.jsxs)("div",{className:"product-item h-100",children:[(0,u.jsxs)("div",{className:"product-img",children:[(0,u.jsx)("img",{src:e.product.images[0],alt:"",className:"w-100"}),(0,u.jsx)("span",{children:e.product.category.name})]}),(0,u.jsxs)("div",{className:"product-info",children:[(0,u.jsx)("h5",{className:"fw-bold title",children:e.product.title.slice(0,30)}),(0,u.jsxs)("div",{className:"add d-flex justify-content-between",children:[(0,u.jsxs)("p",{className:"fw-bold",children:[(0,u.jsx)("span",{className:"d-block",children:"Price:"}),"$ ",e.product.price]}),(0,u.jsx)(o.rU,{to:"/product/".concat(e.product.id),children:(0,u.jsx)("button",{className:"btn",children:"Get It"})})]})]})]})})}var m=n(6458),p=n(456);function x(){var e=(0,r.useContext)(m.x).setUser,t=(0,r.useState)(!0),n=(0,a.Z)(t,2),i=n[0],x=n[1],f=(0,r.useState)([]),h=(0,a.Z)(f,2),v=h[0],j=h[1],N=(0,r.useState)([]),g=(0,a.Z)(N,2),b=g[0],w=g[1],Z=(0,r.useState)([]),y=(0,a.Z)(Z,2),k=y[0],S=y[1],C=(0,r.useState)([]),P=(0,a.Z)(C,2),I=P[0],E=P[1],B=(0,r.useState)(21),M=(0,a.Z)(B,2),U=M[0],q=M[1],F=(0,r.useState)(10),L=(0,a.Z)(F,2),R=L[0],A=L[1],G=function e(t,n){return n<=0?(q(Math.ceil(t/1)),A(1)):t/n>=10?(q(Math.ceil(t/n)),A(n)):e(t,Math.floor(n/2))},O=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("https://api.escuelajs.co/api/v1/categories");case 2:t=e.sent,n=t.data,j(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),!t){e.next=11;break}return e.next=4,l().get("https://api.escuelajs.co/api/v1/categories/".concat(t,"/products"));case 4:n=e.sent,c=n.data,S(c),w(c),x(!1),e.next=12;break;case 11:z();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,l().get("https://api.escuelajs.co/api/v1/products");case 3:t=e.sent,n=t.data,S(n),w(n),x(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),t=document.getElementById("minPrice").value||0,n=document.getElementById("maxPrice").value||1e6,c=b.filter((function(e){return e.price>=t&&e.price<=n})),S(c),x(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),t=document.getElementById("searchName").value,(n=b.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}))).length>0?S(n):E(""),x(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var t=(0,c.Z)((0,s.Z)().mark((function t(){var n,a,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){var t=(0,c.Z)((0,s.Z)().mark((function t(n){var c,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l().get("https://api.escuelajs.co/api/v1/users/");case 2:c=t.sent,a=c.data,e(a[n-1]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(a=localStorage.getItem("token"))&&(r=(0,p.Z)(a),console.log(r),n(r.sub));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){O(),z(),J()}),[]),(0,r.useEffect)((function(){k.length>0&&(G(k.length,10),E(k.slice(0,U)))}),[k]),(0,u.jsxs)("div",{className:"home d-flex position-relative",children:[(0,u.jsxs)("div",{className:"sidebar",children:[(0,u.jsxs)("div",{className:"categories",children:[(0,u.jsx)("h3",{children:"Categories"}),(0,u.jsxs)("select",{className:"btn bg-white cate-select",children:[(0,u.jsx)("option",{value:"all",children:"all"}),v&&v.map((function(e){return(0,u.jsx)("option",{"data-id":e.id,value:e.name,children:e.name.slice(0,20)},e.id)}))]}),(0,u.jsx)("button",{onClick:function(){var e=document.querySelector(".cate-select").selectedOptions[0].dataset.id;$(e)},className:"btn btn-secondary w-100 my-3",children:"Filter"})]}),(0,u.jsxs)("div",{className:"price",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"d-flex",children:[(0,u.jsx)("span",{className:"flex-basis fw-bold",children:"min"}),(0,u.jsx)("span",{className:"flex-basis fw-bold",children:"max"})]}),(0,u.jsxs)("div",{className:"priceRange d-flex",children:[(0,u.jsx)("input",{id:"minPrice",type:"number",className:"form-control mx-1"}),(0,u.jsx)("input",{id:"maxPrice",type:"number",className:"form-control mx-1"})]}),(0,u.jsx)("button",{onClick:D,className:"btn btn-secondary w-100 my-3",children:"Set Price"})]}),(0,u.jsx)("div",{className:"reset text-center py-3",children:(0,u.jsx)("button",{onClick:function(){document.querySelector(".cate-select").selectedIndex=0,document.getElementById("minPrice").value="",document.getElementById("maxPrice").value="",z()},className:"btn btn-danger",children:"Reset Filters"})})]}),(0,u.jsxs)("div",{className:"products-section",children:[(0,u.jsx)("input",{onChange:H,id:"searchName",className:"form-control",type:"text",name:"",placeholder:"\uf002 Search"}),(0,u.jsx)("div",{className:"products-container container",children:(0,u.jsx)("div",{className:"row gy-2 justify-content-center",children:i?(0,u.jsxs)("div",{className:"spinner loader",children:[(0,u.jsx)("div",{className:"rect1"}),(0,u.jsx)("div",{className:"rect2"}),(0,u.jsx)("div",{className:"rect3"}),(0,u.jsx)("div",{className:"rect4"}),(0,u.jsx)("div",{className:"rect5"})]}):I&&I.map((function(e){return(0,u.jsx)(d,{product:e},e.id)}))})}),(0,u.jsx)("nav",{"aria-label":"...",className:"d-flex",children:(0,u.jsxs)("ul",{className:"pagination mb-0 mx-auto",children:[(0,u.jsx)("li",{className:"page-item disabled",children:(0,u.jsx)("span",{className:"page-link",children:"Previous"})}),new Array(R).fill(1).map((function(e,t){return(0,u.jsx)("li",{className:"page-item",onClick:function(){return E(k.slice(t*U,(t+1)*U))},children:(0,u.jsx)("span",{className:"page-link",children:t+1})},t)})),(0,u.jsx)("li",{className:"page-item",children:(0,u.jsx)(o.rU,{className:"page-link",children:"Next"})})]})})]})]})}}}]);
//# sourceMappingURL=460.61ead0f8.chunk.js.map