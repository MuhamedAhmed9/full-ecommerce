{"version":3,"file":"static/js/460.72ef9968.chunk.js","mappings":"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","sources":["Components/Product/Product.jsx","Components/Home/Home.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Product(props) {\r\n  return (\r\n    <div className=\"product col-md-3\">\r\n      <div className=\"product-item h-100\">\r\n        <div className=\"product-img\">\r\n          <img src={props.product.images[0]} alt=\"\" className=\"w-100\" />\r\n          <span>{props.product.category.name}</span>\r\n        </div>\r\n        <div className=\"product-info\">\r\n          <h5 className=\"fw-bold title\">{props.product.title.slice(0, 30)}</h5>\r\n          <div className=\"add d-flex justify-content-between\">\r\n            <p className=\"fw-bold\">\r\n              <span className=\"d-block\">Price:</span>$ {props.product.price}\r\n            </p>\r\n            <Link to={`/product/${props.product.id}`}>\r\n              <button className=\"btn\">Get It</button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport Product from \"./../Product/Product\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { StoreContext } from \"./../../App\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nexport default function Home() {\r\n  const { setUser } = useContext(StoreContext);\r\n  const [loading, setLoading] = useState(true);\r\n  const [categories, setCategories] = useState([]);\r\n  const [totalProducts, setTotalProducts] = useState([]);\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [productsNumForPage, setProductsNumForPage] = useState(21);\r\n  const defaultNumOfPages = 10;\r\n  const [numOfPages, setNumOfPages] = useState(defaultNumOfPages);\r\n  const specifyNumOfPages = (numOfProducts, numOfPages) => {\r\n    if (numOfPages <= 0) {\r\n      setProductsNumForPage(Math.ceil(numOfProducts / 1));\r\n      return setNumOfPages(1);\r\n    }\r\n    if (numOfProducts / numOfPages >= 10) {\r\n      //10 == 10 products per page\r\n      setProductsNumForPage(Math.ceil(numOfProducts / numOfPages));\r\n      return setNumOfPages(numOfPages);\r\n    } else {\r\n      return specifyNumOfPages(numOfProducts, Math.floor(numOfPages / 2));\r\n    }\r\n  };\r\n  const fetchCategories = async () => {\r\n    const { data } = await axios.get(\r\n      \"https://api.escuelajs.co/api/v1/categories\"\r\n    );\r\n    setCategories(data);\r\n  };\r\n  const fetchCategoryProducts = async (cateId) => {\r\n    setLoading(true);\r\n    if (cateId) {\r\n      const { data } = await axios.get(\r\n        `https://api.escuelajs.co/api/v1/categories/${cateId}/products`\r\n      );\r\n      setAllProducts(data);\r\n      setTotalProducts(data);\r\n      setLoading(false);\r\n    } else {\r\n      getAllProducts();\r\n    }\r\n  };\r\n  const filterCategory = () => {\r\n    const cateId =\r\n      document.querySelector(\".cate-select\").selectedOptions[0].dataset.id;\r\n    fetchCategoryProducts(cateId);\r\n    // console.log(target.selectedOptions[0].value);\r\n    // console.log(target.selectedOptions[0].dataset.id);\r\n  };\r\n  const getAllProducts = async () => {\r\n    setLoading(true);\r\n    const { data } = await axios.get(\r\n      \"https://api.escuelajs.co/api/v1/products\"\r\n    );\r\n    setAllProducts(data);\r\n    setTotalProducts(data);\r\n    setLoading(false);\r\n  };\r\n  const filterPrice = async () => {\r\n    setLoading(true);\r\n    const minPrice = document.getElementById(\"minPrice\").value || 0;\r\n    const maxPrice = document.getElementById(\"maxPrice\").value || 1000000;\r\n    const filteredProducts = totalProducts.filter(\r\n      (product) => product.price >= minPrice && product.price <= maxPrice\r\n    );\r\n    setAllProducts(filteredProducts);\r\n    setLoading(false);\r\n  };\r\n  const FilterName = async () => {\r\n    setLoading(true);\r\n    const name = document.getElementById(\"searchName\").value;\r\n    const filteredProducts = totalProducts.filter((product) =>\r\n      product.title.toLowerCase().includes(name.toLowerCase())\r\n    );\r\n    if (filteredProducts.length > 0) {\r\n      setAllProducts(filteredProducts);\r\n    } else {\r\n      setProducts(\"\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n  const resetFitlers = () => {\r\n    document.querySelector(\".cate-select\").selectedIndex = 0;\r\n    document.getElementById(\"minPrice\").value = \"\";\r\n    document.getElementById(\"maxPrice\").value = \"\";\r\n    getAllProducts();\r\n  };\r\n  const fetchUser = async () => {\r\n    const fetchUser = async (id) => {\r\n      const { data } = await axios.get(\r\n        \"https://api.escuelajs.co/api/v1/users/\"\r\n      );\r\n      setUser(data[id - 1]);\r\n    };\r\n    let token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const decodedToken = jwtDecode(token);\r\n      fetchUser(decodedToken.sub);\r\n    }\r\n  };\r\n  //componentDidMount\r\n  useEffect(() => {\r\n    fetchCategories();\r\n    getAllProducts();\r\n    fetchUser();\r\n  }, []);\r\n  //componentDidUpdate for products\r\n  useEffect(() => {\r\n    if (allProducts.length > 0) {\r\n      specifyNumOfPages(allProducts.length, defaultNumOfPages);\r\n      setProducts(allProducts.slice(0, productsNumForPage));\r\n    }\r\n  }, [allProducts]);\r\n  return (\r\n    // <!-- start sidebar section -->\r\n    <div className=\"home d-flex position-relative\">\r\n      <div className=\"sidebar\">\r\n        <div className=\"categories\">\r\n          <h3>Categories</h3>\r\n          <select className=\"btn bg-white cate-select\">\r\n            <option value=\"all\">all</option>\r\n            {categories &&\r\n              categories.map((category) => {\r\n                return (\r\n                  <option\r\n                    data-id={category.id}\r\n                    key={category.id}\r\n                    value={category.name}\r\n                  >\r\n                    {category.name.slice(0, 20)}\r\n                  </option>\r\n                );\r\n              })}\r\n          </select>\r\n\r\n          <button\r\n            onClick={filterCategory}\r\n            className=\"btn btn-secondary w-100 my-3\"\r\n          >\r\n            Filter\r\n          </button>\r\n        </div>\r\n        <div className=\"price\">\r\n          <h3>Price</h3>\r\n          <div className=\"d-flex\">\r\n            <span className=\"flex-basis fw-bold\">min</span>\r\n            <span className=\"flex-basis fw-bold\">max</span>\r\n          </div>\r\n          <div className=\"priceRange d-flex\">\r\n            <input id=\"minPrice\" type=\"number\" className=\"form-control mx-1\" />\r\n            <input id=\"maxPrice\" type=\"number\" className=\"form-control mx-1\" />\r\n          </div>\r\n          <button\r\n            onClick={filterPrice}\r\n            className=\"btn btn-secondary w-100 my-3\"\r\n          >\r\n            Set Price\r\n          </button>\r\n        </div>\r\n        <div className=\"reset text-center py-3\">\r\n          <button onClick={resetFitlers} className=\"btn btn-danger\">\r\n            Reset Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* <!-- end products section --> */}\r\n      <div className=\"products-section\">\r\n        <input\r\n          onChange={FilterName}\r\n          id=\"searchName\"\r\n          className=\"form-control\"\r\n          type=\"text\"\r\n          name=\"\"\r\n          placeholder=\"&#xf002; Search\"\r\n        />\r\n        <div className=\"products-container container\">\r\n          <div className=\"row gy-2 justify-content-center\">\r\n            {!loading ? (\r\n              products &&\r\n              products.map((product) => (\r\n                <Product key={product.id} product={product} />\r\n              ))\r\n            ) : (\r\n              <div className=\"spinner loader\">\r\n                <div className=\"rect1\"></div>\r\n                <div className=\"rect2\"></div>\r\n                <div className=\"rect3\"></div>\r\n                <div className=\"rect4\"></div>\r\n                <div className=\"rect5\"></div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <nav aria-label=\"...\" className=\"d-flex\">\r\n          <ul className=\"pagination mb-0 mx-auto\">\r\n            <li className=\"page-item disabled\">\r\n              <span className=\"page-link\">Previous</span>\r\n            </li>\r\n            {new Array(numOfPages).fill(1).map((array, index) => {\r\n              return (\r\n                <li\r\n                  key={index}\r\n                  className=\"page-item\"\r\n                  onClick={() =>\r\n                    setProducts(\r\n                      allProducts.slice(\r\n                        index * productsNumForPage,\r\n                        (index + 1) * productsNumForPage\r\n                      )\r\n                    )\r\n                  }\r\n                >\r\n                  <span className=\"page-link\">{index + 1}</span>\r\n                </li>\r\n              );\r\n            })}\r\n            <li className=\"page-item\">\r\n              <Link className=\"page-link\">Next</Link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["Product","props","className","src","product","images","alt","category","name","title","slice","price","to","id","Home","setUser","useContext","StoreContext","useState","loading","setLoading","categories","setCategories","totalProducts","setTotalProducts","allProducts","setAllProducts","products","setProducts","productsNumForPage","setProductsNumForPage","numOfPages","setNumOfPages","specifyNumOfPages","numOfProducts","Math","ceil","floor","fetchCategories","axios","data","fetchCategoryProducts","cateId","getAllProducts","filterPrice","minPrice","document","getElementById","value","maxPrice","filteredProducts","filter","FilterName","toLowerCase","includes","length","fetchUser","token","localStorage","getItem","decodedToken","jwtDecode","sub","useEffect","map","onClick","querySelector","selectedOptions","dataset","type","selectedIndex","onChange","placeholder","Array","fill","array","index"],"sourceRoot":""}